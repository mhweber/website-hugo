<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Testing the rnassqs R package with Willamette basin data</title>
  <meta property="og:title" content="Testing the rnassqs R package with Willamette basin data" />
  <meta name="twitter:title" content="Testing the rnassqs R package with Willamette basin data" />
  <meta name="description" content="Pull in data via API for Survey data This script uses the NASS API to query the NASS Quickstats service for historic acres harvested of primary crop groups in Willamette basin counties in Oregon from 1969-2013. An example of using the NASS Quickstats API to pull in and examine crop data in Willamette basin.
library(dplyr) ## Warning: package &#39;dplyr&#39; was built under R version 3.5.2library(tibble) library(tidyr) library(rnassqs) library(lubridate) library(readr) years &lt;- seq(as.">
  <meta property="og:description" content="Pull in data via API for Survey data This script uses the NASS API to query the NASS Quickstats service for historic acres harvested of primary crop groups in Willamette basin counties in Oregon from 1969-2013. An example of using the NASS Quickstats API to pull in and examine crop data in Willamette basin.
library(dplyr) ## Warning: package &#39;dplyr&#39; was built under R version 3.5.2library(tibble) library(tidyr) library(rnassqs) library(lubridate) library(readr) years &lt;- seq(as.">
  <meta name="twitter:description" content="Pull in data via API for Survey data This script uses the NASS API to query the NASS Quickstats service for historic acres harvested of primary crop groups in Willamette basin counties in Oregon from â€¦">
  <meta name="author" content="Marc Weber"/>
  <link href='https://mhweber.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://mhweber.github.io/img/MeBiking.png" />
  <meta name="twitter:image" content="https://mhweber.github.io/img/MeBiking.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@marc_h_weber" />
  <meta name="twitter:creator" content="@marc_h_weber" />
  <meta property="og:url" content="https://mhweber.github.io/2019/05/28/testing-the-rnassqs-r-package-with-willamette-basin-data/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Marc Weber" />

  <meta name="generator" content="Hugo 0.88.1" />
  <link rel="canonical" href="https://mhweber.github.io/2019/05/28/testing-the-rnassqs-r-package-with-willamette-basin-data/" />
  <link rel="alternate" href="https://mhweber.github.io/index.xml" type="application/rss+xml" title="Marc Weber">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://mhweber.github.io/css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://mhweber.github.io/css/pygment_highlights.css" />
  <link rel="stylesheet" href="https://mhweber.github.io/css/highlight.min.css" />




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-99730307-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://mhweber.github.io/">Marc Weber</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="CV" href="/page/cv/">CV</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Marc Weber" href="https://mhweber.github.io/">
            <img class="avatar-img" src="https://mhweber.github.io/img/MeBiking.png" alt="Marc Weber" />
          </a>
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>Testing the rnassqs R package with Willamette basin data</h1>
                
                
                  <span class="post-meta">
  
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <h2 id="pull-in-data-via-api-for-survey-data">Pull in data via API for Survey data</h2>
<p>This script uses the NASS API to query the NASS Quickstats service for historic acres harvested of primary crop groups in Willamette basin counties in Oregon from 1969-2013.  An example of using the <a href="https://quickstats.nass.usda.gov/api">NASS Quickstats API</a> to pull in and examine crop data in Willamette basin.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
</code></pre></div><pre tabindex="0"><code>## Warning: package 'dplyr' was built under R version 3.5.2
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">tibble</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">rnassqs</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">lubridate</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span>

<span class="n">years</span> <span class="o">&lt;-</span> <span class="nf">seq</span><span class="p">(</span><span class="nf">as.Date</span><span class="p">(</span><span class="s">&#39;1/1/1969&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&#34;%d/%m/%Y&#34;</span><span class="p">),</span><span class="nf">as.Date</span><span class="p">(</span><span class="s">&#39;1/1/2013&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&#34;%d/%m/%Y&#34;</span><span class="p">),</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;years&#39;</span><span class="p">)</span>
<span class="n">years</span> <span class="o">&lt;-</span> <span class="nf">sapply</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="nf">as.numeric</span><span class="p">(</span><span class="nf">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="s">&#39;%Y&#39;</span><span class="p">)))</span>

<span class="n">i</span><span class="o">=</span><span class="m">1</span>
<span class="nf">for</span><span class="p">(</span><span class="n">y</span> <span class="n">in</span> <span class="n">years</span><span class="p">){</span>
  <span class="c1"># print(y)</span>
  <span class="n">params</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="s">&#34;source_desc&#34;</span><span class="o">=</span><span class="s">&#34;SURVEY&#34;</span><span class="p">,</span> <span class="s">&#34;sector_desc&#34;</span><span class="o">=</span><span class="s">&#34;CROPS&#34;</span><span class="p">,</span><span class="s">&#34;year&#34;</span><span class="o">=</span><span class="n">y</span><span class="p">,</span><span class="s">&#34;state_alpha&#34;</span> <span class="o">=</span> <span class="s">&#34;OR&#34;</span><span class="p">,</span>
              <span class="s">&#34;agg_level_desc&#34;</span><span class="o">=</span><span class="s">&#34;COUNTY&#34;</span><span class="p">,</span><span class="s">&#34;asd_desc&#34;</span><span class="o">=</span><span class="s">&#34;NORTHWEST&#34;</span><span class="p">,</span><span class="s">&#34;statisticcat_desc&#34;</span><span class="o">=</span><span class="s">&#34;AREA HARVESTED&#34;</span><span class="p">)</span>
  <span class="n">d</span> <span class="o">=</span> <span class="nf">nassqs</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
  <span class="n">t</span> <span class="o">&lt;-</span> <span class="n">d</span> <span class="o">%&gt;%</span>
    <span class="nf">group_by</span><span class="p">(</span><span class="n">commodity_desc</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="n">county_name</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;COLUMBIA&#34;</span><span class="p">,</span><span class="s">&#34;OTHER (COMBINED) COUNTIES&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="n">Value</span> <span class="o">!=</span> <span class="s">&#34;                 (D)&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">select</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="n">crop</span><span class="o">=</span><span class="n">commodity_desc</span><span class="p">,</span> <span class="n">Value</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">mutate</span><span class="p">(</span><span class="n">Value</span> <span class="o">=</span> <span class="nf">as.numeric</span><span class="p">(</span><span class="nf">gsub</span><span class="p">(</span><span class="s">&#34;\\,&#34;</span><span class="p">,</span><span class="s">&#34;&#34;</span><span class="p">,</span><span class="n">Value</span><span class="p">)))</span> <span class="o">%&gt;%</span>
    <span class="nf">summarise</span><span class="p">(</span><span class="n">acres_harvested</span><span class="o">=</span><span class="nf">sum</span><span class="p">(</span><span class="n">Value</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">spread</span><span class="p">(</span><span class="n">crop</span><span class="p">,</span><span class="n">acres_harvested</span><span class="p">)</span> 
  
  <span class="n">t</span> <span class="o">&lt;-</span> <span class="n">t</span> <span class="o">%&gt;%</span>
    <span class="nf">add_column</span><span class="p">(</span><span class="n">Year</span> <span class="o">=</span> <span class="n">y</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">select</span><span class="p">(</span><span class="n">Year</span><span class="p">,</span> <span class="nf">everything</span><span class="p">())</span>
  <span class="nf">if </span><span class="p">(</span><span class="n">i</span><span class="o">==</span><span class="m">1</span><span class="p">)</span> <span class="n">f</span> <span class="o">&lt;-</span>  <span class="n">t</span> 
  <span class="nf">if </span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span> <span class="n">f</span> <span class="o">&lt;-</span> <span class="nf">bind_rows</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">t</span><span class="p">)</span>
  <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="m">+1</span>  
<span class="p">}</span>
</code></pre></div><h2 id="visualize-survey-data">Visualize Survey data</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>
<span class="nf">options</span><span class="p">(</span><span class="n">scipen</span><span class="o">=</span><span class="m">3</span><span class="p">)</span>
<span class="n">f2</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span><span class="o">-</span><span class="n">Year</span><span class="p">)</span>
<span class="n">p1</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Year</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">key</span><span class="p">),</span>
                           <span class="n">data</span> <span class="o">=</span> <span class="n">f2</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s">&#34;identity&#34;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">ylab</span><span class="p">(</span><span class="s">&#39;Acres Harvested&#39;</span><span class="p">)</span>
<span class="n">p1</span>
</code></pre></div><p><img src="/img/survey_ggplot.png" alt="survey ggplot"></p>
<h2 id="compare-with-nass-census">Compare with NASS Census</h2>
<p>This script uses the NASS API to query the NASS Quickstats service for historic acres harvested of primary crop groups in Willamette basin counties in Oregon from 1969 to 2013</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">years</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1997</span><span class="p">,</span><span class="m">2002</span><span class="p">,</span> <span class="m">2007</span><span class="p">,</span> <span class="m">2012</span><span class="p">,</span> <span class="m">2017</span><span class="p">)</span>

<span class="n">i</span><span class="o">=</span><span class="m">1</span>
<span class="nf">for</span><span class="p">(</span><span class="n">y</span> <span class="n">in</span> <span class="n">years</span><span class="p">){</span>
  <span class="c1"># print(y)</span>
  <span class="n">params</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="s">&#34;source_desc&#34;</span><span class="o">=</span><span class="s">&#34;CENSUS&#34;</span><span class="p">,</span> <span class="s">&#34;sector_desc&#34;</span><span class="o">=</span><span class="s">&#34;CROPS&#34;</span><span class="p">,</span><span class="s">&#34;year&#34;</span><span class="o">=</span><span class="n">y</span><span class="p">,</span><span class="s">&#34;state_alpha&#34;</span> <span class="o">=</span> <span class="s">&#34;OR&#34;</span><span class="p">,</span>
                <span class="s">&#34;agg_level_desc&#34;</span><span class="o">=</span><span class="s">&#34;COUNTY&#34;</span><span class="p">,</span><span class="s">&#34;asd_desc&#34;</span><span class="o">=</span><span class="s">&#34;NORTHWEST&#34;</span><span class="p">,</span><span class="s">&#34;statisticcat_desc&#34;</span><span class="o">=</span><span class="s">&#34;AREA HARVESTED&#34;</span><span class="p">)</span>
  <span class="n">d</span> <span class="o">=</span> <span class="nf">nassqs</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
  <span class="n">t</span> <span class="o">&lt;-</span> <span class="n">d</span> <span class="o">%&gt;%</span>
    <span class="nf">group_by</span><span class="p">(</span><span class="n">commodity_desc</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="n">county_name</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;COLUMBIA&#34;</span><span class="p">,</span><span class="s">&#34;OTHER (COMBINED) COUNTIES&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="n">Value</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;                 (D)&#34;</span><span class="p">,</span><span class="s">&#34;                 (Z)&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">select</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="n">crop</span><span class="o">=</span><span class="n">commodity_desc</span><span class="p">,</span> <span class="n">Value</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">mutate</span><span class="p">(</span><span class="n">Value</span> <span class="o">=</span> <span class="nf">as.numeric</span><span class="p">(</span><span class="nf">gsub</span><span class="p">(</span><span class="s">&#34;\\,&#34;</span><span class="p">,</span><span class="s">&#34;&#34;</span><span class="p">,</span><span class="n">Value</span><span class="p">)))</span> <span class="o">%&gt;%</span>
    <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarise</span><span class="p">(</span><span class="n">acres_harvested</span><span class="o">=</span><span class="nf">sum</span><span class="p">(</span><span class="n">Value</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">spread</span><span class="p">(</span><span class="n">crop</span><span class="p">,</span><span class="n">acres_harvested</span><span class="p">)</span> 
  
  <span class="n">t</span> <span class="o">&lt;-</span> <span class="n">t</span> <span class="o">%&gt;%</span>
    <span class="nf">add_column</span><span class="p">(</span><span class="n">Year</span> <span class="o">=</span> <span class="n">y</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">select</span><span class="p">(</span><span class="n">Year</span><span class="p">,</span> <span class="nf">everything</span><span class="p">())</span>
  <span class="nf">if </span><span class="p">(</span><span class="n">i</span><span class="o">==</span><span class="m">1</span><span class="p">)</span> <span class="n">f</span> <span class="o">&lt;-</span>  <span class="n">t</span> 
  <span class="nf">if </span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span> <span class="n">f</span> <span class="o">&lt;-</span> <span class="nf">bind_rows</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">t</span><span class="p">)</span>
  <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="m">+1</span>  
<span class="p">}</span>
</code></pre></div><h2 id="visualize-census-data">Visualize Census data</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">f2</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">f[</span><span class="p">,</span><span class="m">1</span><span class="o">:</span><span class="m">15</span><span class="n">]</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span><span class="o">-</span><span class="n">Year</span><span class="p">)</span>
<span class="n">p1</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Year</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">key</span><span class="p">),</span>
                           <span class="n">data</span> <span class="o">=</span> <span class="n">f2</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s">&#34;identity&#34;</span><span class="p">)</span><span class="o">+</span>
  <span class="nf">ylab</span><span class="p">(</span><span class="s">&#39;Acrea Harvested&#39;</span><span class="p">)</span>
<span class="n">p1</span>
</code></pre></div><p><img src="/img/census_ggplot1.png" alt="census ggplot1"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">f3</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">f[</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">16</span><span class="o">:</span><span class="m">29</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span><span class="o">-</span><span class="n">Year</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Year</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">key</span><span class="p">),</span>
                           <span class="n">data</span> <span class="o">=</span> <span class="n">f3</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s">&#34;identity&#34;</span><span class="p">)</span><span class="o">+</span>
  <span class="nf">ylab</span><span class="p">(</span><span class="s">&#39;Acres Harvested&#39;</span><span class="p">)</span>
<span class="n">p2</span>
</code></pre></div><p><img src="/img/census_ggplot2.png" alt="census ggplot2"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">f4</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">f[</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">30</span><span class="o">:</span><span class="m">43</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span><span class="o">-</span><span class="n">Year</span><span class="p">)</span>
<span class="n">p3</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Year</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">key</span><span class="p">),</span>
                           <span class="n">data</span> <span class="o">=</span> <span class="n">f4</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s">&#34;identity&#34;</span><span class="p">)</span><span class="o">+</span>
  <span class="nf">ylab</span><span class="p">(</span><span class="s">&#39;Acres Harvested&#39;</span><span class="p">)</span>
<span class="n">p3</span>
</code></pre></div><p><img src="/img/census_ggplot3.png" alt="census ggplot3"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">f5</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">f[</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">44</span><span class="o">:</span><span class="m">58</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span><span class="o">-</span><span class="n">Year</span><span class="p">)</span>
<span class="n">p4</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Year</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">key</span><span class="p">),</span>
                           <span class="n">data</span> <span class="o">=</span> <span class="n">f5</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s">&#34;identity&#34;</span><span class="p">)</span><span class="o">+</span>
  <span class="nf">ylab</span><span class="p">(</span><span class="s">&#39;Acres Harvested&#39;</span><span class="p">)</span>
<span class="n">p4</span>
</code></pre></div><p><img src="/img/census_ggplot4.png" alt="census ggplot4"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">f6</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">f[</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">59</span><span class="o">:</span><span class="m">72</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span><span class="o">-</span><span class="n">Year</span><span class="p">)</span>
<span class="n">p5</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Year</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">key</span><span class="p">),</span>
                           <span class="n">data</span> <span class="o">=</span> <span class="n">f6</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s">&#34;identity&#34;</span><span class="p">)</span><span class="o">+</span>
  <span class="nf">ylab</span><span class="p">(</span><span class="s">&#39;Acres Harvested&#39;</span><span class="p">)</span>
<span class="n">p5</span>
</code></pre></div><p><img src="/img/census_ggplot5.png" alt="census ggplot5"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">f7</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">f[</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">73</span><span class="o">:</span><span class="m">86</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span><span class="o">-</span><span class="n">Year</span><span class="p">)</span>
<span class="n">p6</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Year</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">key</span><span class="p">),</span>
                           <span class="n">data</span> <span class="o">=</span> <span class="n">f7</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s">&#34;identity&#34;</span><span class="p">)</span><span class="o">+</span>
  <span class="nf">ylab</span><span class="p">(</span><span class="s">&#39;Acres Harvested&#39;</span><span class="p">)</span>
<span class="n">p6</span>
</code></pre></div><p><img src="/img/census_ggplot6.png" alt="census ggplot6"></p>

      </article>

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="https://mhweber.github.io/2018/11/09/adding-wms-basemap-in-r-with-mapview/" data-toggle="tooltip" data-placement="top" title="Adding WMS basemap in R with mapview">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="https://mhweber.github.io/2020/02/12/trying-out-bookdown-and-publishing-to-github-pages/" data-toggle="tooltip" data-placement="top" title="Trying Out Bookdown and Publishing to GitHub Pages">Next Post &rarr;</a>
          </li>
        
      </ul>

      
        
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "mhweber" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:mweber36@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/mhweber" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/marc_h_weber" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/marc-weber-a41a3190" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/1905305/mweber" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.instagram.com/mweber46" title="Instagram">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="https://mhweber.github.io/index.xml" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          Marc Weber
          &nbsp;&bull;&nbsp;
          2020

          
            &nbsp;&bull;&nbsp;
            <a href="https://mhweber.github.io/">Marc Weber</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.88.1</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://mhweber.github.io/js/main.js"></script>
<script src="https://mhweber.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
<script src="/js/load-photoswipe.js"></script>




  </body>
</html>

